<html>
    <head>
        <script src="desenha.js"></script> 
        <script src="objeto.js"></script> 
        <script src="nave.js"></script> 
        <script src="inimigo.js"></script> 
        <script src="tiro.js"></script> 
        

    </head>
    <body>
        <canvas style="border: 1px solid black;" id="game" width="800" height="600"></canvas>
    </body>

    <script>

        var objetos = []

        const myCanvas = document.getElementById("game")
        const ctx = myCanvas.getContext("2d");

        var nave = new Nave(100,500,2)
        objetos.push(nave)

        var tiro = new Tiro(0,0,5, nave);
        objetos.push(tiro)

        var inimigo = new Inimigo(100, 100, 5, tiro)
        objetos.push(inimigo)
        var inimigo = new Inimigo(150, 100, 5, tiro)
        objetos.push(inimigo)
        var inimigo = new Inimigo(200,100, 5, tiro)
        objetos.push(inimigo)
        var inimigo = new Inimigo(250, 100, 5, tiro)
        objetos.push(inimigo)
        var inimigo = new Inimigo(300, 100, 5, tiro)
        objetos.push(inimigo)
        var inimigo = new Inimigo(150, 150, 5, tiro)
        objetos.push(inimigo)
        var inimigo = new Inimigo(200, 150, 5, tiro)
        objetos.push(inimigo)
        var inimigo = new Inimigo(250, 150, 5, tiro)
        objetos.push(inimigo)
        var inimigo = new Inimigo(300, 150, 5, tiro)
        objetos.push(inimigo)
        var inimigo = new Inimigo(350, 150, 5, tiro)
        objetos.push(inimigo)


        var teclas = []

        for (let i = 0; i < 26; i += 1) {
            teclas.push(false);
        }

        window.addEventListener("keydown", (e) => {
            if(e.key.charCodeAt(0) >= "a".charCodeAt(0) && e.key.charCodeAt(0) <= "z".charCodeAt(0) ){
                teclas[e.key.charCodeAt(0) - 97] = true
            }
        });

        window.addEventListener("keyup", (e) => {
            if( e.key.charCodeAt(0) >= 'a'.charCodeAt(0) && e.key.charCodeAt(0) <= 'z'.charCodeAt(0) ){
                teclas[e.key.charCodeAt(0) - 97] = false
            }
        });

        function atualizaTela(){

            desenhaFundo(ctx, myCanvas)

            for(var i = 0; i < objetos.length; i++){
                objetos[i].desenha(ctx)
                objetos[i].processa(teclas)
            }

            setTimeout(function() {   
                atualizaTela();
            }, 10)
        }

        atualizaTela();

    </script>

</html>